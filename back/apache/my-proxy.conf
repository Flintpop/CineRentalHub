<VirtualHost *:443>
    ServerName localhost:443

    SSLEngine on
    SSLCertificateFile "/usr/local/apache2/conf/server.crt"
    SSLCertificateKeyFile "/usr/local/apache2/conf/server.key"

    # Activer le module de réécriture d'URL
    RewriteEngine On

    # Retirer /api du chemin avant de transférer la requête en utilisant le flag [P] pour proxy
    RewriteRule ^/api/(.*)$ http://node:3000/$1 [P,L]

    # Assurer que la réponse du proxy peut ajuster les en-têtes Location et URI
    ProxyPassReverse /api http://node:3000/

    <Proxy *>
        Require all granted
    </Proxy>

</VirtualHost>
